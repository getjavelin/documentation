"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[4929],{2673:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});let s=JSON.parse('{"id":"javelin-core/route-usage-guide","title":"How to Use Custom and Unified Routes","description":"Step-by-step guide for configuring, testing, and using custom and unified routes in Javelin.","source":"@site/docs/javelin-core/routeguides.md","sourceDirName":"javelin-core","slug":"/javelin-core/route-usage-guide","permalink":"/javelin-core/route-usage-guide","draft":false,"unlisted":false,"editUrl":"https://github.com/getjavelin/documentation/tree/main/docs/javelin-core/routeguides.md","tags":[],"version":"current","frontMatter":{"id":"route-usage-guide","title":"How to Use Custom and Unified Routes","description":"Step-by-step guide for configuring, testing, and using custom and unified routes in Javelin.","sidebar_label":"Guides"},"sidebar":"docsSidebar","previous":{"title":"Configuration","permalink":"/javelin-core/route-configuration"},"next":{"title":"Overview","permalink":"/javelin-core/mcp-overview"}}');var t=i(74848),r=i(28453);let l={id:"route-usage-guide",title:"How to Use Custom and Unified Routes",description:"Step-by-step guide for configuring, testing, and using custom and unified routes in Javelin.",sidebar_label:"Guides"},d="Route Guides",o={},a=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"1. Create a Provider",id:"1-create-a-provider",level:3},{value:"2. Add Secrets and Create Virtual Keys",id:"2-add-secrets-and-create-virtual-keys",level:3},{value:"Creating a Secret",id:"creating-a-secret",level:3},{value:"Copying the Virtual Key",id:"copying-the-virtual-key",level:3},{value:"3. Get the Javelin API Key",id:"3-get-the-javelin-api-key",level:3},{value:"Using Unified Routes",id:"using-unified-routes",level:2},{value:"How to Use Unified Route",id:"how-to-use-unified-route",level:3},{value:"Sample Unified Route Request",id:"sample-unified-route-request",level:3},{value:"Using Custom Routes",id:"using-custom-routes",level:2},{value:"Testing in Playground",id:"testing-in-playground",level:3},{value:"Using Fallback Model in Custom Routes",id:"using-fallback-model-in-custom-routes",level:3},{value:"YAML Configuration Example",id:"yaml-configuration-example",level:4},{value:"Route URL",id:"route-url",level:3},{value:"Sample Custom Route Request",id:"sample-custom-route-request",level:3},{value:"Summary",id:"summary",level:2}];function c(e){let n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"route-guides",children:"Route Guides"})}),"\n",(0,t.jsxs)(n.p,{children:["This guide walks you through using ",(0,t.jsx)(n.strong,{children:"Custom Routes"})," and ",(0,t.jsx)(n.strong,{children:"Unified Routes"})," in Javelin. It covers prerequisites, how to create secrets, use ",(0,t.jsx)(n.code,{children:"virtual keys"})," (v-keys) for enhanced security, retrieve the Javelin API key, and inspect requests via Chronicles."]}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsx)(n.h3,{id:"1-create-a-provider",children:"1. Create a Provider"}),"\n",(0,t.jsxs)(n.p,{children:["Before using any route, you must set up a provider.",(0,t.jsx)(n.br,{}),"\n","Refer to the ",(0,t.jsx)(n.a,{href:"./provider-overview",children:"Provider Guide"})," to get started."]}),"\n",(0,t.jsx)(n.h3,{id:"2-add-secrets-and-create-virtual-keys",children:"2. Add Secrets and Create Virtual Keys"}),"\n",(0,t.jsxs)(n.p,{children:["To securely store and manage your provider credentials, Javelin uses a ",(0,t.jsx)(n.strong,{children:"Secrets"})," system. These secrets can be injected into request headers or query parameters via ",(0,t.jsx)(n.strong,{children:"virtual keys"})," (v-keys), which enhance security by preventing direct exposure of actual provider keys."]}),"\n",(0,t.jsx)(n.h3,{id:"creating-a-secret",children:"Creating a Secret"}),"\n",(0,t.jsx)(n.p,{children:"To create a secret:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Go to a specific ",(0,t.jsx)(n.strong,{children:"Gateway"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["From the sidebar, click ",(0,t.jsx)(n.strong,{children:"Secrets"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Click the ",(0,t.jsx)(n.strong,{children:"Create Secret"})," button."]}),"\n",(0,t.jsxs)(n.li,{children:["Fill in the required fields:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Name"}),": A label for the secret."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Provider Secret Key"}),": The actual key (e.g., OpenAI API key)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Select Provider"}),": Choose the corresponding provider."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Injection Method"}),": Choose whether the key should be injected via:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"headers"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"query-params"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Save"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Add Secrets page",src:i(51250).A+"",width:"2880",height:"1620"})}),"\n",(0,t.jsx)(n.h3,{id:"copying-the-virtual-key",children:"Copying the Virtual Key"}),"\n",(0,t.jsx)(n.p,{children:"After saving the secret:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["You'll see the ",(0,t.jsx)(n.strong,{children:"Virtual Key (v-key)"})," in the secrets list."]}),"\n",(0,t.jsxs)(n.li,{children:["Copy the Virtual Key using the ",(0,t.jsx)(n.strong,{children:"copy"})," button."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["You can use this Virtual Key in header ",(0,t.jsx)(n.strong,{children:"x-javelin-virtualapikey"})," when requesting your custom routes or test playgrounds to refer to the provider key indirectly, adding an extra layer of security and abstraction."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Copy Virtaul Key",src:i(90430).A+"",width:"2880",height:"1628"})}),"\n",(0,t.jsx)(n.h3,{id:"3-get-the-javelin-api-key",children:"3. Get the Javelin API Key"}),"\n",(0,t.jsx)(n.p,{children:"To authenticate requests from your application:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Navigate to a specific ",(0,t.jsx)(n.strong,{children:"Gateway"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["In the Configuration screen, create a new ",(0,t.jsx)(n.strong,{children:"Application"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Once created, a modal opens \u2014 copy the ",(0,t.jsx)(n.strong,{children:"Javelin API Key"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"This key is required in request headers to:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Authenticate the route call"}),"\n",(0,t.jsx)(n.li,{children:"Associate usage with the correct application"}),"\n",(0,t.jsx)(n.li,{children:"Enable monitoring in application chronicles"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Copy Application Developer Key",src:i(76143).A+"",width:"2880",height:"1626"})}),"\n",(0,t.jsx)(n.h2,{id:"using-unified-routes",children:"Using Unified Routes"}),"\n",(0,t.jsx)(n.p,{children:"Unified Routes are flexible, abstracted endpoints that can handle various model types (chat, completion, embedding) using a single route. They are ideal for simplified integrations and internal A/B testing."}),"\n",(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsx)(n.mdxAdmonitionTitle,{}),(0,t.jsxs)(n.p,{children:["When you create a provider, Javelin automatically provisions a ",(0,t.jsx)(n.strong,{children:"Reserved unified route"})," for that provider. These are system-managed and help you get started instantly without any manual setup."]})]}),"\n",(0,t.jsx)(n.h3,{id:"how-to-use-unified-route",children:"How to Use Unified Route"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Go to the ",(0,t.jsx)(n.strong,{children:"Unified Route"})," tab for your provider."]}),"\n",(0,t.jsxs)(n.li,{children:["Copy the auto-generated ",(0,t.jsx)(n.code,{children:"curl"})," request."]}),"\n",(0,t.jsxs)(n.li,{children:["Replace the following:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"$OPENAI_API_KEY"}),": Your actual provider key"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"$JAVELIN_API_KEY"}),": Your application\u2019s Javelin API Key"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Unified Route CURL URL",src:i(56304).A+"",width:"2880",height:"1624"})}),"\n",(0,t.jsx)(n.h3,{id:"sample-unified-route-request",children:"Sample Unified Route Request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST "https://api-dev.javelin.live/v1/chat/completions" \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer $OPENAI_API_KEY" \\\n  -H "X-Javelin-Apikey: $JAVELIN_API_KEY" \\\n  -H "X-Javelin-route: my-openai-route" \\\n  -d \'{\n    "model": "gpt-3.5-turbo",\n    "messages": [\n      {"role": "system", "content": "You are a helpful assistant."},\n      {"role": "user", "content": "Tell me about Javelin."}\n    ],\n    "temperature": 0.7,\n    "max_tokens": 150\n  }\'\n'})}),"\n",(0,t.jsxs)(n.p,{children:["After sending the request, visit the ",(0,t.jsx)(n.strong,{children:"Chronicles"})," section to inspect:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Request payload"}),"\n",(0,t.jsx)(n.li,{children:"Provider response"}),"\n",(0,t.jsx)(n.li,{children:"Model input/output"}),"\n",(0,t.jsx)(n.li,{children:"Errors (if any)"}),"\n",(0,t.jsx)(n.li,{children:"Guardrail triggers"}),"\n",(0,t.jsx)(n.li,{children:"Raw JSON logs"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Unified Route Chronicles",src:i(18411).A+"",width:"2880",height:"1618"})}),"\n",(0,t.jsx)(n.h2,{id:"using-custom-routes",children:"Using Custom Routes"}),"\n",(0,t.jsx)(n.p,{children:"Custom Routes allow precise control over how models are configured and routed.\nThese routes support custom model names, suffixes, and fallback logic tailored to your use case."}),"\n",(0,t.jsx)(n.h3,{id:"testing-in-playground",children:"Testing in Playground"}),"\n",(0,t.jsxs)(n.p,{children:["Each custom route has a ",(0,t.jsx)(n.strong,{children:"Playground"})," tab."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Secrets are automatically selected based on the provider."}),"\n",(0,t.jsx)(n.li,{children:"No manual headers or keys needed in the UI."}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Execute"})," to test."]}),"\n",(0,t.jsx)(n.li,{children:"View results immediately below the form."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Route Playground",src:i(35204).A+"",width:"2880",height:"1622"})}),"\n",(0,t.jsx)(n.h3,{id:"using-fallback-model-in-custom-routes",children:"Using Fallback Model in Custom Routes"}),"\n",(0,t.jsxs)(n.p,{children:["Javelin provides a built-in ",(0,t.jsx)(n.strong,{children:"Fallback Model"})," mechanism in Custom Routes. This ensures higher reliability by rerouting a request to a secondary model if the primary model fails with defined error codes."]}),"\n",(0,t.jsxs)(n.p,{children:["On a Custom Route\u2019s detail page, you\u2019ll see a toggle labeled ",(0,t.jsx)(n.strong,{children:"Enable Fallback Model"}),". When enabled, three input fields appear:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Fallback Conditions"}),": A comma-separated list of HTTP status codes that trigger the fallback. Common values include ",(0,t.jsx)(n.code,{children:"429"})," (rate limit) and ",(0,t.jsx)(n.code,{children:"503"})," (service unavailable)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Fallback Model Name"}),": The name of the model you'd like to use as a fallback (e.g., ",(0,t.jsx)(n.code,{children:"gpt-4"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Fallback Model Suffix"}),": The request path suffix used for the fallback model (e.g., ",(0,t.jsx)(n.code,{children:"/chat/completions"}),")."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"When a request to the primary model results in one of the specified error codes, Javelin automatically forwards the same input to the fallback model."}),"\n",(0,t.jsx)(n.h4,{id:"yaml-configuration-example",children:"YAML Configuration Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'models:\n  - name: gpt-3.5-turbo\n    provider: openai\n    suffix: /chat/completions\n    virtual_secret_key: ""\n    fallback_enabled: true  # fallback toggle enabled for this model\n    weight: 0\n    fallback_codes:\n      - 429\n      - 503\n  - name: gpt-4\n    provider: openai\n    suffix: /chat/completions\n    virtual_secret_key: ""\n'})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"The first object in the models array is the primary model, and the second is the fallback model."})}),"\n",(0,t.jsx)(n.h3,{id:"route-url",children:"Route URL"}),"\n",(0,t.jsx)(n.p,{children:"Each custom route has a fixed URL like:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"https://api-dev.javelin.live/v1/query/gpt-35-route\n"})}),"\n",(0,t.jsx)(n.p,{children:"Use this in your API client or codebase."}),"\n",(0,t.jsx)(n.h3,{id:"sample-custom-route-request",children:"Sample Custom Route Request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl \'https://api-dev.javelin.live/v1/query/gpt-35-route\' \\\n  -H \'accept: application/json, text/plain, */*\' \\\n  -H \'content-type: application/json\' \\\n  -H \'x-javelin-Apikey: $JAVELIN_API_KEY\' \\\n  --data-raw \'{\n    "max_tokens":100,\n    "messages":[\n      {"content":"You are a helpful assistant.","role":"system"},\n      {"content":"What is artificial intelligence?","role":"user"}\n    ],\n    "temperature":0.7\n  }\'\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Once executed, open ",(0,t.jsx)(n.strong,{children:"Chronicles"})," to view:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Model Input and Output: See the full message history sent to the LLM and the generated response."}),"\n",(0,t.jsx)(n.li,{children:"Guardrails Data: Understand which guardrails were triggered (e.g., DLP, prompt Injection, security filters, etc)."}),"\n",(0,t.jsx)(n.li,{children:"Raw JSON Logs: Inspect the complete raw request and response payloads."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Chronicles Overview Tab",src:i(48749).A+"",width:"2880",height:"1626"})}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Feature"}),(0,t.jsx)(n.th,{children:"Unified Route"}),(0,t.jsx)(n.th,{children:"Custom Route"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"System Generated"})}),(0,t.jsx)(n.td,{children:"\u2705"}),(0,t.jsx)(n.td,{children:"\u274C"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Requires Setup"})}),(0,t.jsx)(n.td,{children:"\u274C"}),(0,t.jsx)(n.td,{children:"\u2705"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Playground Support"})}),(0,t.jsx)(n.td,{children:"\u274C"}),(0,t.jsx)(n.td,{children:"\u2705"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Flexible Format"})}),(0,t.jsx)(n.td,{children:"Dynamic"}),(0,t.jsx)(n.td,{children:"Limited to a Model"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Ideal For"})}),(0,t.jsx)(n.td,{children:"Fast integration, multiple models"}),(0,t.jsx)(n.td,{children:"Deep customization, enterprise workflows"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Chronicles Support"})}),(0,t.jsx)(n.td,{children:"\u2705"}),(0,t.jsx)(n.td,{children:"\u2705"})]})]})]})]})}function h(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},51250:(e,n,i)=>{i.d(n,{A:()=>s});let s=i.p+"assets/images/addSecret-ab16a73fd4dc071d83fbc373d7095368.png"},48749:(e,n,i)=>{i.d(n,{A:()=>s});let s=i.p+"assets/images/chronicleOverview-d3843da2c0d50c6bbd13b25ed4ae1f16.png"},76143:(e,n,i)=>{i.d(n,{A:()=>s});let s=i.p+"assets/images/copyDeveloperKey-d0c51691e1ab43d04f40bf404e060a8f.png"},90430:(e,n,i)=>{i.d(n,{A:()=>s});let s=i.p+"assets/images/copySecretsVKey-6a94dd1740718b4a6935a65a8038f6b4.png"},35204:(e,n,i)=>{i.d(n,{A:()=>s});let s=i.p+"assets/images/playground-9f58734bf7b0c95d1c4cab11469bee72.png"},18411:(e,n,i)=>{i.d(n,{A:()=>s});let s=i.p+"assets/images/unifiedRouteChronicle-5dcd62cae93714e015908f5d65abcb24.png"},56304:(e,n,i)=>{i.d(n,{A:()=>s});let s=i.p+"assets/images/unifiedRouteCurl-ecad5325135e1952d5e113927d5955d5.png"},28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>d});var s=i(96540);let t={},r=s.createContext(t);function l(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);