"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[263],{22707:(e,n,t)=>{t.d(n,{A:()=>x});var r=t(96540),a=t(18215),o=t(44319),i=t(56347),s=t(94280),l=t(73024),c=t(58417),u=t(44031);function d(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return d(e).map((({props:{value:e,label:n,attributes:t,default:r}})=>({value:e,label:n,attributes:t,default:r})))}(t);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function h({value:e,tabValues:n}){return n.some((n=>n.value===e))}function f({queryString:e=!1,groupId:n}){const t=(0,i.W6)(),a=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,l.aZ)(a),(0,r.useCallback)((e=>{if(!a)return;const n=new URLSearchParams(t.location.search);n.set(a,e),t.replace({...t.location,search:n.toString()})}),[a,t])]}function m(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,o=p(e),[i,l]=(0,r.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!h({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find((e=>e.default))??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:o}))),[c,d]=f({queryString:t,groupId:a}),[m,b]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,a]=(0,u.Dv)(n);return[t,(0,r.useCallback)((e=>{n&&a.set(e)}),[n,a])]}({groupId:a}),y=(()=>{const e=c??m;return h({value:e,tabValues:o})?e:null})();(0,s.A)((()=>{y&&l(y)}),[y]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!h({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),b(e)}),[d,b,o]),tabValues:o}}var b=t(46916);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var _=t(74848);function g({className:e,block:n,selectedValue:t,selectValue:r,tabValues:i}){const s=[],{blockElementScrollPositionUntilNextRender:l}=(0,o.a_)(),c=e=>{const n=e.currentTarget,a=s.indexOf(n),o=i[a].value;o!==t&&(l(n),r(o))},u=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=s.indexOf(e.currentTarget)+1;n=s[t]??s[0];break}case"ArrowLeft":{const t=s.indexOf(e.currentTarget)-1;n=s[t]??s[s.length-1];break}}n?.focus()};return(0,_.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":n},e),children:i.map((({value:e,label:n,attributes:r})=>(0,_.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{s.push(e)},onKeyDown:u,onClick:c,...r,className:(0,a.A)("tabs__item",y.tabItem,r?.className,{"tabs__item--active":t===e}),children:n??e},e)))})}function v({lazy:e,children:n,selectedValue:t}){const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=o.find((e=>e.props.value===t));return e?(0,r.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,_.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function j(e){const n=m(e);return(0,_.jsxs)("div",{className:(0,a.A)("tabs-container",y.tabList),children:[(0,_.jsx)(g,{...n,...e}),(0,_.jsx)(v,{...n,...e})]})}function x(e){const n=(0,b.A)();return(0,_.jsx)(j,{...e,children:d(e.children)},String(n))}},30058:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>u,default:()=>f,frontMatter:()=>c,metadata:()=>r,toc:()=>p});const r=JSON.parse('{"id":"javelin-core/administration/create-route","title":"Creating Route","description":"Step-by-step guide to creating routes with safety configurations, DLP, content filtering, and security settings","source":"@site/docs/javelin-core/administration/createroute.md","sourceDirName":"javelin-core/administration","slug":"/javelin-core/administration/create-route","permalink":"/javelin-core/administration/create-route","draft":false,"unlisted":false,"editUrl":"https://github.com/getjavelin/documentation/tree/main/docs/javelin-core/administration/createroute.md","tags":[],"version":"current","frontMatter":{"id":"create-route","title":"Creating Route","description":"Step-by-step guide to creating routes with safety configurations, DLP, content filtering, and security settings","sidebar_label":"Create Route"}}');var a=t(74848),o=t(28453),i=t(22707),s=t(53632),l=t(41776);const c={id:"create-route",title:"Creating Route",description:"Step-by-step guide to creating routes with safety configurations, DLP, content filtering, and security settings",sidebar_label:"Create Route"},u="Creating Route",d={},p=[{value:"Configuration Options",id:"configuration-options",level:2},{value:"Basic Settings",id:"basic-settings",level:3},{value:"DLP (Data Loss Prevention)",id:"dlp-data-loss-prevention",level:3},{value:"Content Filter (Trust &amp; Safety)",id:"content-filter-trust--safety",level:3},{value:"Prompt Safety",id:"prompt-safety",level:3},{value:"Security Filters",id:"security-filters",level:3}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"creating-route",children:"Creating Route"})}),"\n","\n",(0,a.jsx)(n.h1,{id:"creating-route-1",children:"Creating Route"}),"\n",(0,a.jsx)(n.p,{children:"Routes in Javelin define how incoming requests are processed and which providers handle them. This guide shows you how to create and configure routes to control request routing, apply security policies, and manage fallback behaviors. You'll learn to set up routes with safety configurations, data loss prevention (DLP), content filtering, and other security settings."}),"\n",(0,a.jsxs)(i.A,{children:[(0,a.jsx)(s.A,{value:"curl",label:"Using cURL",children:(0,a.jsx)(l.A,{language:"bash",children:'curl -X POST \\\n-H "Content-Type: application/json" \\\n-H "x-javelin-apikey: $JAVELIN_API_KEY" \\\n-d \'{\n    "name": "test_route_1",\n    "type": "chat",\n    "enabled": true,\n    "models": [ \n        {\n            "name": "gpt-3.5-turbo",\n            "provider": "openai",\n            "suffix": "/chat/completions"\n        }\n    ],\n    "config": {\n        "rate_limit": 3,\n        "retries": 3,\n        "archive": true,\n        "retention": 7,\n        "dlp": {\n            "enabled": false \n        }\n    }\n}\' \\\n"https://your-api-domain.com/v1/admin/routes/test_route_1"\n'})}),(0,a.jsx)(s.A,{value:"python",label:"Using Python SDK",children:(0,a.jsx)(l.A,{language:"python",title:"Javelin Route Example",showLineNumbers:!0,children:'from javelin_sdk import (\n    JavelinClient,\n    JavelinConfig,\n    Route\n)\n\nimport os\n    \n# Retrieve environment variables\njavelin_api_key = os.getenv(\'JAVELIN_API_KEY\')\n\n# create javelin client\nconfig = JavelinConfig(\n    base_url="https://your-api-domain.com",\n    javelin_api_key=javelin_api_key\n)\nclient = JavelinClient(config)\n\n# Example of a route with all safety features enabled\nroute_data = {\n    "name": "test_route_1",\n    "type": "chat",\n    "enabled": True,\n    "models": [\n        {\n            "name": "gpt-3.5-turbo",\n            "provider": "openai",\n            "suffix": "/chat/completions",\n        }\n    ],\n    "config": {\n        "rate_limit": 3,\n        "retries": 3,\n        "archive": True,\n        "retention": 7,\n        "dlp": {\n            "enabled": False\n        }\n    }\n}\n\nroute = Route.model_validate(route_data)\n\n# create the route, for async use `await client.acreate_route(route)`\nclient.create_route(route)\n'})}),(0,a.jsx)(s.A,{value:"inspect",label:"Route in Inspect Mode",children:(0,a.jsx)(l.A,{language:"bash",children:'curl -X POST \\\n-H "Content-Type: application/json" \\\n-H "x-javelin-apikey: $JAVELIN_API_KEY" \\\n-d \'{\n    "name": "test_route_1",\n    "type": "chat",\n    "enabled": true,\n    "models": [ \n        {\n            "name": "gpt-3.5-turbo",\n            "provider": "OpenAI",\n            "suffix": "/chat/completions",\n            "fallback_enabled": false\n        }\n    ],\n    "config": {\n        "dlp": {\n            "enabled": true,\n            "strategy": "promptfoo_dlp"\n        },\n        "archive": true,\n        "retries": 5,\n        "retention": 7,\n        "rate_limit": 0,\n        "prompt_safety": {\n            "enabled": true,\n            "error_code": 200,\n            "content_types": [],\n            "reject_prompt": "Rejected from prompt safety policy."\n        },\n        "content_filter": {\n            "enabled": true,\n            "error_code": 200,\n            "content_types": [],\n            "reject_prompt": "Unable to complete request, trust & safety violation detected"\n        },\n        "security_filters": {\n            "enabled": true,\n            "content_types": [],\n            "reject_prompt": "Rejected from security filters policy."\n        }\n    }\n}\' \\\n"https://your-api-domain.com/v1/admin/routes/test_route_1"\n'})}),(0,a.jsx)(s.A,{value:"trust-safety",label:"Route with Trust & Safety Reject",children:(0,a.jsx)(l.A,{language:"bash",children:'curl -X POST \\\n-H "Content-Type: application/json" \\\n-H "x-javelin-apikey: $JAVELIN_API_KEY" \\\n-d \'{\n    "name": "test_route_1",\n    "type": "chat",\n    "enabled": true,\n    "models": [ \n        {\n            "name": "gpt-3.5-turbo",\n            "provider": "OpenAI",\n            "suffix": "/chat/completions",\n            "fallback_enabled": false\n        }\n    ],\n    "config": {\n        "dlp": {\n            "enabled": true,\n            "strategy": "promptfoo_dlp"\n        },\n        "archive": true,\n        "retries": 5,\n        "retention": 7,\n        "rate_limit": 0,\n        "prompt_safety": {\n            "enabled": true,\n            "error_code": 200,\n            "content_types": [],\n            "reject_prompt": "Rejected from prompt safety policy."\n        },\n        "content_filter": {\n            "enabled": true,\n            "error_code": 200,\n            "content_types": [\n                {\n                    "operator": "greater_than",\n                    "restriction": "sexual",\n                    "probability_threshold": 0.25\n                },\n                {\n                    "operator": "greater_than",\n                    "restriction": "violence",\n                    "probability_threshold": 0.25\n                },\n                {\n                    "operator": "greater_than",\n                    "restriction": "hate_speech",\n                    "probability_threshold": 0.25\n                },\n                {\n                    "operator": "greater_than",\n                    "restriction": "profanity",\n                    "probability_threshold": 0.25\n                },\n                {\n                    "operator": "greater_than",\n                    "restriction": "crime",\n                    "probability_threshold": 0.25\n                }\n            ],\n            "reject_prompt": "Unable to complete request, trust & safety violation detected"\n        },\n        "security_filters": {\n            "enabled": true,\n            "content_types": [],\n            "reject_prompt": "Rejected from security filters policy."\n        }\n    }\n}\' \\\n"https://your-api-domain.com/v1/admin/routes/test_route_1"\n'})}),(0,a.jsx)(s.A,{value:"prompt-safety",label:"Route with Prompt Safety Reject",children:(0,a.jsx)(l.A,{language:"bash",children:'curl -X POST \\\n-H "Content-Type: application/json" \\\n-H "x-javelin-apikey: $JAVELIN_API_KEY" \\\n-d \'{\n    "name": "test_route_1",\n    "type": "chat",\n    "enabled": true,\n    "models": [ \n        {\n            "name": "gpt-3.5-turbo",\n            "provider": "OpenAI",\n            "suffix": "/chat/completions",\n            "fallback_enabled": false\n        }\n    ],\n    "config": {\n        "dlp": {\n            "enabled": true,\n            "strategy": "promptfoo_dlp"\n        },\n        "archive": true,\n        "retries": 5,\n        "retention": 7,\n        "rate_limit": 0,\n        "prompt_safety": {\n            "enabled": true,\n            "error_code": 200,\n            "content_types": [\n                {\n                    "operator": "greater_than",\n                    "restriction": "prompt_injection",\n                    "probability_threshold": 0.25\n                },\n                {\n                    "operator": "greater_than",\n                    "restriction": "jailbreak",\n                    "probability_threshold": 0.25\n                }\n            ],\n            "reject_prompt": "Rejected from prompt safety policy."\n        },\n        "content_filter": {\n            "enabled": true,\n            "error_code": 200,\n            "content_types": [\n                {\n                    "operator": "greater_than",\n                    "restriction": "sexual",\n                    "probability_threshold": 0.25\n                },\n                {\n                    "operator": "greater_than",\n                    "restriction": "violence",\n                    "probability_threshold": 0.25\n                },\n                {\n                    "operator": "greater_than",\n                    "restriction": "hate_speech",\n                    "probability_threshold": 0.25\n                },\n                {\n                    "operator": "greater_than",\n                    "restriction": "profanity",\n                    "probability_threshold": 0.25\n                },\n                {\n                    "operator": "greater_than",\n                    "restriction": "crime",\n                    "probability_threshold": 0.25\n                }\n            ],\n            "reject_prompt": "Unable to complete request, trust & safety violation detected"\n        },\n        "security_filters": {\n            "enabled": true,\n            "content_types": [],\n            "reject_prompt": "Rejected from security filters policy."\n        }\n    }\n}\' \\\n"https://your-api-domain.com/v1/admin/routes/test_route_1"\n'})})]}),"\n",(0,a.jsx)(n.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,a.jsx)(n.h3,{id:"basic-settings",children:"Basic Settings"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n    "archive": true,\n    "retention": 7,\n    "rate_limit": 0,\n    "retries": 5\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"dlp-data-loss-prevention",children:"DLP (Data Loss Prevention)"}),"\n",(0,a.jsx)(n.p,{children:"Data Loss Prevention configuration helps protect sensitive information:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'"dlp": {\n    "enabled": true,\n    "strategy": "promptfoo_dlp"\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"content-filter-trust--safety",children:"Content Filter (Trust & Safety)"}),"\n",(0,a.jsx)(n.p,{children:"Content filtering allows you to reject requests based on content types:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'"content_filter": {\n    "enabled": true,\n    "error_code": 200,\n    "content_types": [\n        {\n            "operator": "greater_than",\n            "restriction": "sexual",\n            "probability_threshold": 0.25 // Threshold can be set to 0.25, 0.5, 0.75 or 1\n        }\n    ],\n    "reject_prompt": "Unable to complete request, trust & safety violation detected"\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"Available content restrictions:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"sexual"}),"\n",(0,a.jsx)(n.li,{children:"violence"}),"\n",(0,a.jsx)(n.li,{children:"hate_speech"}),"\n",(0,a.jsx)(n.li,{children:"profanity"}),"\n",(0,a.jsx)(n.li,{children:"crime"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"prompt-safety",children:"Prompt Safety"}),"\n",(0,a.jsx)(n.p,{children:"Prompt safety helps prevent prompt injection and jailbreak attempts:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'"prompt_safety": {\n    "enabled": true,\n    "error_code": 200,\n    "content_types": [\n        {\n            "operator": "greater_than",\n            "restriction": "prompt_injection",\n            "probability_threshold": 0.25 // Threshold can be set to 0.25, 0.5, 0.75 or 1\n        },\n        {\n            "operator": "greater_than",\n            "restriction": "jailbreak",\n            "probability_threshold": 0.25 // Threshold can be set to 0.25, 0.5, 0.75 or 1\n        }\n    ],\n    "reject_prompt": "Rejected from prompt safety policy."\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"security-filters",children:"Security Filters"}),"\n",(0,a.jsx)(n.p,{children:"Additional security filters can be enabled:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'"security_filters": {\n    "enabled": true,\n    "content_types": []\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"All safety features support an inspect mode configuration that enables detection of various content types including language patterns, code/markdown syntax, and non-ASCII characters. The SecurityFilters Processor tracks and provides metrics for these security filter matches to help monitor and analyze potential security concerns."})]})}function f(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},53632:(e,n,t)=>{t.d(n,{A:()=>i});t(96540);var r=t(18215);const a={tabItem:"tabItem_Ymn6"};var o=t(74848);function i({children:e,hidden:n,className:t}){return(0,o.jsx)("div",{role:"tabpanel",className:(0,r.A)(a.tabItem,t),hidden:n,children:e})}}}]);